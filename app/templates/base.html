<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>COVERLESS TERMINAL MK.II</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
        rel="stylesheet">
  
  <style>
    :root {
        --base-bg: #050505;
        --text-color: #e0e0e0;
        --heading-color: #ffffff;
        --accent-color-primary: #00ddff; /* Bright Sci-fi Blue */
        --accent-color-secondary: #00ff7f; /* Spring Green / Success */
        --border-color-strong: #555555;
        --border-color-medium: #333333;
        --input-bg: #1a1a1a;
        --input-focus-bg: #2a2a2a;
        --input-border: #4a4a4a;
        --input-focus-border: #777777;
        --font-primary: 'Orbitron', 'Impact', 'Arial Black', sans-serif; /* Sci-fi / Bold */
        --font-monospace: 'Consolas', 'Courier New', Courier, monospace;
    }

    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');

    /* --- Base & Typography --- */
    body {
        background-color: var(--base-bg);
        color: var(--text-color);
        font-family: var(--font-primary);
        letter-spacing: 0.8px;
        text-transform: uppercase;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
    }

    .content-wrapper {
        flex: 1;
    }

    h1, h2, h3, h4, h5, h6 {
        color: var(--heading-color);
        font-weight: 700; /* Orbitron looks good at 700 */
        margin-bottom: 1.8rem;
        letter-spacing: 1.5px;
        text-shadow: 0 0 5px var(--accent-color-primary), 1px 1px 3px #000000;
    }

    h2 {
        border-bottom: 3px solid var(--border-color-strong);
        padding-bottom: 0.8rem;
        margin-bottom: 2.5rem;
        font-size: 2.2rem; /* Adjusted for Orbitron */
    }

    a {
        color: var(--accent-color-primary);
        text-decoration: none;
        font-weight: bold;
    }

    a:hover, a:focus {
        color: #ffffff;
        text-decoration: none;
        text-shadow: 0 0 8px var(--accent-color-primary);
        outline: none;
    }

    /* --- Navbar --- */
    .navbar.bg-dark {
        background-color: #000000 !important;
        border-bottom: 3px solid var(--border-color-medium);
        padding-top: 0.8rem;
        padding-bottom: 0.8rem;
        box-shadow: 0 2px 10px rgba(0,0,0,0.5);
    }

    .navbar-brand {
        font-size: 2rem;
        font-weight: 900; /* Orbitron boldest */
        color: var(--heading-color) !important;
        letter-spacing: 2px;
        text-shadow: 0 0 10px var(--accent-color-primary);
    }

    .navbar-text {
        color: #cccccc !important;
        font-size: 0.9rem;
    }
    .btn-outline-light.btn-sm { /* Logout button */
        color: var(--text-color);
        border-color: var(--border-color-medium);
        font-weight: 700;
    }
    .btn-outline-light.btn-sm:hover {
        color: #000000;
        background-color: var(--accent-color-primary);
        border-color: var(--accent-color-primary);
        text-shadow: none;
    }


    /* --- Forms (General & Professional Login/Register) --- */
    .form-container { /* For centering login/register forms */
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 2rem 1rem;
        width: 100%;
    }
    .form-card {
        background-color: rgba(10,10,10,0.8);
        border: 2px solid var(--border-color-medium);
        padding: 2rem;
        width: 100%;
        max-width: 450px; /* Max width for login/register forms */
        box-shadow: 0 0 20px rgba(0,0,0,0.7), inset 0 0 15px rgba(0,0,0,0.5);
    }
    @media (min-width: 576px) {
        .form-card {
            padding: 2.5rem;
        }
    }


    .form-label {
        font-weight: 700;
        color: var(--heading-color);
        font-size: 0.9rem;
        margin-bottom: 0.8rem;
        display: block;
        letter-spacing: 1px;
    }

    .form-control,
    .form-select {
        background-color: var(--input-bg);
        color: var(--text-color);
        border: 2px solid var(--input-border);
        border-radius: 0;
        padding: 0.8rem 1rem;
        font-size: 1rem;
        font-family: var(--font-monospace);
        text-transform: none;
        box-shadow: inset 0 0 5px rgba(0,0,0,0.5);
    }

    .form-control:focus,
    .form-select:focus {
        background-color: var(--input-focus-bg);
        color: #ffffff;
        border-color: var(--accent-color-primary);
        box-shadow: inset 0 0 8px rgba(0,0,0,0.6), 0 0 10px var(--accent-color-primary);
    }

    .form-control::placeholder {
        color: #555555;
        text-transform: uppercase;
        font-style: italic;
        font-family: var(--font-monospace);
    }

    textarea.form-control {
        min-height: 120px;
    }

    /* --- Buttons --- */
    .btn {
        border-radius: 0;
        font-weight: 700; /* Orbitron bold */
        padding: 0.7rem 1.8rem;
        font-size: 1rem;
        letter-spacing: 1.2px;
        border-width: 2px;
        transition: all 0.15s ease-in-out;
        box-shadow: 0px 0px 8px rgba(0,0,0,0.3);
        text-shadow: 1px 1px 2px rgba(0,0,0,0.4);
    }
    .btn:active {
        transform: translateY(1px);
        box-shadow: 0px 0px 4px rgba(0,0,0,0.5);
    }

    .btn-primary {
        background-color: var(--border-color-medium);
        border-color: var(--border-color-strong);
        color: var(--heading-color);
    }
    .btn-primary:hover, .btn-primary:focus {
        background-color: var(--border-color-strong);
        border-color: #777;
        color: var(--heading-color);
        box-shadow: 0 0 10px var(--border-color-strong);
    }

    .btn-success { /* Login/Register submit */
        background-color: transparent;
        border-color: var(--accent-color-secondary);
        color: var(--accent-color-secondary);
    }
    .btn-success:hover, .btn-success:focus {
        background-color: var(--accent-color-secondary);
        border-color: var(--accent-color-secondary);
        color: #000000;
        box-shadow: 0 0 15px var(--accent-color-secondary);
    }

    .btn-info { /* Automate button */
        background-color: transparent;
        border-color: var(--accent-color-primary);
        color: var(--accent-color-primary);
    }
    .btn-info:hover, .btn-info:focus {
        background-color: var(--accent-color-primary);
        border-color: var(--accent-color-primary);
        color: #000000;
        box-shadow: 0 0 15px var(--accent-color-primary);
    }
    .btn:disabled {
        background-color: #111 !important;
        border-color: #333 !important;
        color: #555 !important;
        cursor: not-allowed;
        box-shadow: none !important;
        text-shadow: none !important;
    }


    /* --- Alerts --- */
    .alert {
        border-radius: 0;
        border-width: 2px;
        padding: 1rem;
        font-family: var(--font-monospace);
        text-transform: none;
        font-size: 0.95rem;
        box-shadow: 0 0 10px rgba(0,0,0,0.3);
        margin-top: 1.5rem;
        margin-bottom: 1.5rem;
    }
    .alert-warning {
        background-color: rgba(255, 140, 0, 0.1); /* DarkOrange base */
        border-color: #ff8c00; 
        color: #ff8c00;
        text-shadow: 0 0 5px #ff8c00;
    }
    .alert-success {
        background-color: rgba(0, 255, 127, 0.1); /* SpringGreen base */
        border-color: var(--accent-color-secondary); 
        color: var(--accent-color-secondary);
        text-shadow: 0 0 5px var(--accent-color-secondary);
    }

    /* --- Container & General Layout --- */
    .container {
        padding-top: 2rem;
        padding-bottom: 2rem;
        width: 100%;
    }
    
    /* --- Sci-Fi Specific Elements (mostly for receiver) --- */
    .sci-fi-screen {
        font-family: var(--font-monospace);
        background-color: rgba(5,10,15,0.85); /* Dark blueish tint */
        border: 2px solid var(--accent-color-primary);
        box-shadow: 0 0 15px var(--accent-color-primary), inset 0 0 10px rgba(0,100,150,0.5);
        color: var(--accent-color-primary);
        padding: 1rem;
        overflow-y: auto;
        text-transform: none;
    }
    .sci-fi-screen::placeholder {
        color: rgba(0,221,255,0.4);
        font-style: italic;
    }

    /* Scanline Effect */
    .scanline-overlay {
        position: relative;
        overflow: hidden;
    }
    .scanline-overlay::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        background: linear-gradient(
            to bottom,
            rgba(10,30,40,0) 0%,
            rgba(10,30,40,0) 98%,
            rgba(10,30,40,0.2) 99%,
            rgba(10,30,40,0) 100%
        );
        background-size: 100% 3px; /* Adjust scanline thickness and spacing */
        animation: scanline-anim 15s linear infinite;
        opacity: 0.4;
    }
    @keyframes scanline-anim {
        0% { background-position: 0 0; }
        100% { background-position: 0 -100px; } /* Adjust for speed */
    }

    /* Text typing cursor */
    .typing-cursor {
        display: inline-block;
        width: 8px;
        height: 1.2em; /* Relative to font size */
        background-color: var(--accent-color-primary);
        animation: blink-cursor 0.7s infinite;
        margin-left: 2px;
        box-shadow: 0 0 5px var(--accent-color-primary);
    }
    @keyframes blink-cursor {
        0%, 100% { opacity: 1; }
        50% { opacity: 0; }
    }

    /* Glow effect for active processing */
    .processing-glow {
        animation: pulse-glow 1.5s infinite alternate;
    }
    @keyframes pulse-glow {
        from { box-shadow: 0 0 10px var(--accent-color-primary), inset 0 0 8px rgba(0,100,150,0.3); }
        to   { box-shadow: 0 0 25px var(--accent-color-primary), inset 0 0 15px rgba(0,100,150,0.6); }
    }
    .text-processing-glow {
        animation: pulse-text-glow 1.5s infinite alternate;
    }
     @keyframes pulse-text-glow {
        from { text-shadow: 0 0 5px var(--accent-color-primary), 1px 1px 3px #000000; }
        to   { text-shadow: 0 0 15px var(--accent-color-primary), 0 0 20px var(--accent-color-primary), 1px 1px 3px #000000; }
    }

  </style>
</head>
<body>
  <div class="content-wrapper">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">COVERLESS TERMINAL</a>
        {% if current_user.is_authenticated %}
        <span class="navbar-text text-white mx-3">
          OPERATIVE: {{ current_user.username }} (LEVEL: {{ current_user.role }})
        </span>
        <a class="btn btn-outline-light btn-sm" href="{{ url_for('auth.logout') }}">LOGOUT</a>
        {% endif %}
      </div>
    </nav>
    <div class="container">
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for category, msg in messages %}
            <div class="alert alert-{{ category if category else 'warning' }} mt-3 mb-3">{{ msg }}</div>
          {% endfor %}
        {% endif %}
      {% endwith %}
      
      {% block content %}{% endblock %}
    </div>
  </div>
  
  {% block scripts %}{% endblock %}
</body>
</html>